(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{218:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},253:function(e,t,n){e.exports=n(439)},258:function(e,t,n){},435:function(e,t,n){},439:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(70),i=n.n(r),c=(n(258),n(17)),s=n(18),l=n(21),u=n(19),d=n(20),p=n(22),h=n(459),m=n(462),f=n(460),b=n(35),E=n(52),g=n(216),O=n(217),v=n(66),k="SET_BOOKS",y="SET_SINGLE_BOOK",j="CREATE_BOOK",C="DELETE_BOOK",I="UPDATE_BOOK",S="SET_GENRES",B="SET_SINGLE_GENRE",T="DELETE_GENRE",w="CREATE_GENRE",A="UPDATE_GENRE";var G=Object(E.combineReducers)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case k:return Object(v.a)(t.data);case y:return e;case C:case I:return Object(v.a)(e);default:return e}},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case S:return Object(v.a)(t.data);case B:return e;case T:case A:return Object(v.a)(e);default:return e}}}),x=(n(77),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement("h1",null,"This is Home"),o.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa strong. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede link mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi."),o.a.createElement("h3",null,"Caracter\xedsticas de este proyecto"),o.a.createElement("p",null,'Concepto de "componetizaci\xf3n funcional":'),o.a.createElement("ul",null,o.a.createElement("li",null,"Maximizaci\xf3n del uso de la componetizaci\xf3n (siempre que se pueda, componetizar, aunque en el futuro haya que refactorizar)"),o.a.createElement("li",null,"Seguimiento de una logica funcional: Componentes presentacionales y componentes contenedores (e.g. Listing)"),o.a.createElement("li",null,"Inmutabilidad, sobre todo en gesti\xf3n de estados. Evitando el uso de herencia (inheritace) con las clases (dif\xedcil para alguien acostumbrado al concepto de OOP de Angular por ejemplo)"),o.a.createElement("li",null,"No es necesario utilizar Redux en un proyecto como este, pero lo he metido por escabilidad"),o.a.createElement("li",null,"C\xf3digo simple, en caso de a\xf1adir nuevas feature, siempre crear nuevos HOC o simplemente funciones puras (return nextProp)")))}}]),t}(a.Component)),N=n(449),D=n(447),F=n(456),R=n(218),q=n.n(R),L=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={},n.handleItemClick=function(e,t){var a=t.name;return n.setState({activeItem:a})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.activeItem;return o.a.createElement(F.a,{stackable:!0},o.a.createElement(F.a.Item,null,o.a.createElement("img",{className:"App-logo",src:q.a,alt:"BeezyBook",width:"200",height:"200"})),o.a.createElement(F.a.Item,{name:"home",active:"home"===e,onClick:this.handleItemClick,as:D.a,to:"/"},"HOME"),o.a.createElement(F.a.Item,{name:"library",active:"library"===e,onClick:this.handleItemClick,as:D.a,to:"/library"},"BOOKS"),o.a.createElement(F.a.Item,{name:"genres",active:"genres"===e,onClick:this.handleItemClick,as:D.a,to:"/genres"},"GENRES"))}}]),t}(a.Component),_=n(464),z=n(461),H=n(458),M=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={log:[],logCount:0,open:!1},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(_.a,{open:this.props.openNotification,onClose:this.handleClose},o.a.createElement(z.a,{style:{left:"40%",position:"fixed",top:"50%",zIndex:1e3}},o.a.createElement(H.a,null,"Hello!"),o.a.createElement("p",null,this.props.contentNotification)))}}]),t}(a.Component),U=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={navVisible:!0},n.navVisibility=function(){n.setState({navVisible:!n.state.navVisible})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"layout"},o.a.createElement(M,{messageOpen:this.props.messageOpen,messageContent:this.props.messageContent}),o.a.createElement(L,null),o.a.createElement(N.a,null,this.props.children))}}]),t}(a.Component),V=n(451),J=n(30),K=n.n(J),P=n(155),W=n.n(P),Q=n(224),X={host:"http://localhost:4000"};function Y(e){return $.apply(this,arguments)}function $(){return($=Object(Q.a)(W.a.mark(function e(t){var n;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=4;break}return e.abrupt("return",t.json());case 4:throw(n=new Error(t.statusText)).response=t,n;case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Z=n(455),ee=n(457),te=n(152),ne=function(e){var t=e.thead,n=e.data,a=e.handleEdit,r=e.handleDelete;return o.a.createElement(Z.a,{celled:!0},o.a.createElement(Z.a.Header,null,o.a.createElement(Z.a.Row,null,t.map(function(e){return o.a.createElement(Z.a.HeaderCell,{key:K.a.generate()},e)}))),o.a.createElement(Z.a.Body,null,n.map(function(e){return o.a.createElement(Z.a.Row,{key:K.a.generate()},t.map(function(t){return o.a.createElement(Z.a.Cell,{key:K.a.generate()},e[t.toLowerCase()])}),o.a.createElement(Z.a.Cell,null,o.a.createElement(ee.a,{onClick:function(){return a(e.id)},primary:!0},"Edit"),o.a.createElement(ee.a,{onClick:function(){return r(e.id)},color:"red"},"Delete")))})),o.a.createElement(Z.a.Footer,null,o.a.createElement(Z.a.Row,null,o.a.createElement(Z.a.HeaderCell,{colSpan:"3"},o.a.createElement(F.a,{floated:"right",pagination:!0},o.a.createElement(F.a.Item,{as:"a",icon:!0},o.a.createElement(te.a,{name:"chevron left"})),o.a.createElement(F.a.Item,{as:"a"},"1"),o.a.createElement(F.a.Item,{as:"a"},"2"),o.a.createElement(F.a.Item,{as:"a"},"3"),o.a.createElement(F.a.Item,{as:"a"},"4"),o.a.createElement(F.a.Item,{as:"a",icon:!0},o.a.createElement(te.a,{name:"chevron right"})))))))},ae=n(107),oe=n(463),re=n(453),ie=n(452),ce=n(450),se=n(454);function le(e){if(e.ok)return e.json();var t=new Error(e.statusText);throw t.response=e,t}function ue(e){return{type:S,data:e}}function de(e){return{type:w,data:e}}function pe(){return function(e){fetch("".concat(X.host,"/genres"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(le).then(function(t){e(ue(t))})}}var he={backgroundColor:"#fff",border:"none",cursor:"pointer",outline:"none"},me=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){var a=t.name,o=t.value;a||n.matchGenre();var r=Object.assign(n.state.data,Object(ae.a)({},a,o));n.setState({data:r})},n.handleSubmit=function(){n.state.editBookId?n.props.updateBook(n.state.data).then(function(e){console.log("successful book update",e),n.setState({modalOpen:!1,messageOpen:!0,messageText:"successful book update"})}):n.props.createBook(n.state.data).then(function(e){console.log("successful book create",e),n.setState({modalOpen:!1})})},n.state={modalOpen:!1,data:{id:K.a.generate(),title:""}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchGenresApi()}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&(void 0===this.props.data?this.setState({data:this.emptyForm()}):this.setState({data:this.props.data,modalOpen:!0})),null===e.editBookId||void 0===this.state.data?this.setState({data:this.emptyForm()}):e.editBookId!==this.props.editBookId&&this.setState({editBookId:this.props.editBookId}),e.modalOpen!==this.props.modalOpen&&this.setState({modalOpen:!this.state.modalOpen})}},{key:"emptyForm",value:function(){return{id:K.a.generate(),title:"",author:"",country:"",genre:"",year:null,publisher:"",isbn:"",edition:"",price:""}}},{key:"composeTitle",value:function(){return this.props.data?"Edit book":"New book"}},{key:"render",value:function(){var e=this,t=o.a.createElement("button",{onClick:function(){return e.setState({modalOpen:!0,data:e.emptyForm(),editBookId:null})},style:he},o.a.createElement(te.a,{name:"plus square",color:"green"})," Add new");return o.a.createElement(oe.a,{duration:500},o.a.createElement(re.a,{trigger:t,open:this.state.modalOpen,onClose:function(){return e.setState({modalOpen:!1})},closeIcon:!0},o.a.createElement(H.a,{icon:"file text outline",content:this.composeTitle()}),o.a.createElement(re.a.Content,null,o.a.createElement(ie.a,{id:"newbook",onSubmit:this.handleSubmit},o.a.createElement(ie.a.Field,null,o.a.createElement(ce.a,{autoFocus:!0,type:"text",name:"title",placeholder:"book title",onChange:this.handleChange,value:this.state.data.title})),o.a.createElement(ie.a.Field,null,o.a.createElement(ce.a,{autoFocus:!0,type:"text",name:"author",placeholder:"Book author",onChange:this.handleChange,value:this.state.data.author})),o.a.createElement(ie.a.Field,null,o.a.createElement(ce.a,{autoFocus:!0,type:"text",name:"country",placeholder:"Country",onChange:this.handleChange,value:this.state.data.country})),o.a.createElement(ie.a.Field,null,o.a.createElement(ce.a,{autoFocus:!0,type:"text",name:"isbn",placeholder:"ISBN code",onChange:this.handleChange,value:this.state.data.isbn})),o.a.createElement(ie.a.Field,null,o.a.createElement(se.a,{name:"genre",placeholder:"Choose genre",search:!0,selection:!0,options:this.props.genres,onChange:this.handleChange,value:this.state.data.genre})))),o.a.createElement(re.a.Actions,null,o.a.createElement(ee.a,{form:"newbook",type:"submit",color:"green"},o.a.createElement(te.a,{name:"save"})," Save"))))}}]),t}(a.Component);var fe=Object(b.b)(function(e,t){return{genres:e.genres,data:t.data,openNotification:e.openNotification,textNotification:e.textNotification}},{createBook:function(e){return function(t){return fetch("".concat(X.host,"/books"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(Y).then(function(e){return t(function(e){return{type:j,data:e}}(e))})}},fetchGenresApi:pe,fetchBookApi:function(e){return function(t){fetch("".concat(X.host,"/books/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(Y).then(function(e){return t(function(e){return{type:y,data:e}}(e))})}},updateBook:function(e){return function(t){return fetch("".concat(X.host,"/books/").concat(e.id),{method:"put",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(Y).then(function(e){return t(function(e){return{type:I,data:e}}(e))})}}})(me),be=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).componentDidMount=function(){e.props.fetchGenresApi()},e.handleChange=function(t,n){var a=n.value;e.setState({value:a}),e.props.updateListing(a)},e.state={},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(se.a,{name:"genre",placeholder:"Choose genre",search:!0,selection:!0,options:this.props.genres,onChange:this.handleChange,value:this.state.value})}}]),t}(a.Component);var Ee=Object(b.b)(function(e,t){return{genres:e.genres}},{fetchGenresApi:pe})(be),ge=["TITLE","AUTHOR","COUNTRY","GENRE","PRICE","ACTIONS"],Oe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){n.props.fetchBooksApi()},n.handleDelete=function(e){n.props.deleteBook(e).then(function(e){console.log("book deleted!!",e),n.props.fetchBooksApi()})},n.state={},n.handleDelete=n.handleDelete.bind(Object(p.a)(Object(p.a)(n))),n.handleEdit=n.handleEdit.bind(Object(p.a)(Object(p.a)(n))),n.updateListing=n.updateListing.bind(Object(p.a)(Object(p.a)(n))),n.resetFilter=n.resetFilter.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){e.books!==this.props.books&&this.setState({books:this.props.books})}},{key:"handleEdit",value:function(e){this.setState({editBookId:e,books:this.props.books,modalOpen:!this.state.modalOpen})}},{key:"updateListing",value:function(e){var t=this.props.books.filter(function(t){return t.genre===e});console.log(t),this.setState({books:t})}},{key:"resetFilter",value:function(){}},{key:"render",value:function(){var e=this;if(0===this.props.books.length)return o.a.createElement(V.a,{active:!0,inline:"centered"});var t=this.state.books||this.props.books,n=-1!==t.findIndex(function(t){return t.id===e.state.editBookId})?t.findIndex(function(t){return t.id===e.state.editBookId}):{};n&&t[n];return o.a.createElement("div",null,o.a.createElement(fe,{data:t[n],editBookId:this.state.editBookId,modalOpen:this.state.modalOpen}),o.a.createElement(Ee,{updateListing:this.updateListing}),o.a.createElement(ne,{thead:ge,data:t,handleEdit:this.handleEdit,handleDelete:this.handleDelete}))}}]),t}(a.Component);var ve=Object(b.b)(function(e,t){if(e.books)return{books:e.books}},{fetchBooksApi:function(){return function(e){fetch("".concat(X.host,"/books"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(Y).then(function(t){return e(function(e){return{type:k,data:e}}(t))})}},deleteBook:function(e){return function(t){return fetch("".concat(X.host,"/books/").concat(e),{method:"delete",headers:{"Content-Type":"application/json"}}).then(Y).then(function(n){return t(function(e){return{type:C,id:e}}(e))})}}})(Oe),ke=(n(435),n(437),{backgroundColor:"#fff",border:"none",cursor:"pointer",outline:"none"}),ye=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){var a=t.name,o=t.value;a||(a=e.target.name,o=e.target.value);var r=Object.assign(n.state.data,Object(ae.a)({},a,o));n.setState({data:r})},n.handleSubmit=function(){n.state.editBookId?n.props.updateGenre(n.state.data).then(function(e){console.log("successful book update",e),n.setState({modalOpen:!1})}):n.props.createGenre(n.state.data).then(function(e){console.log("successful genre submit",e),n.setState({modalOpen:!1})})},n.state={modalOpen:!1,editGenreId:null,data:{id:K.a.generate(),title:""}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchGenresApi()}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({data:this.props.data,modalOpen:!0}),null===e.editGenreId||void 0===this.state.data?this.setState({data:this.emptyForm()}):e.editBookId!==this.props.editBookId&&this.setState({editBookId:this.props.editBookId}),e.modalOpen!==this.props.modalOpen&&this.setState({modalOpen:!this.state.modalOpen})}},{key:"emptyForm",value:function(){return{id:K.a.generate(),title:"",author:"",country:"",genre:"",year:null,publisher:"",isbn:"",edition:"",price:""}}},{key:"composeTitle",value:function(){return this.props.data?"Edit genre":"New genre"}},{key:"render",value:function(){var e=this,t=o.a.createElement("button",{onClick:function(){return e.setState({modalOpen:!0,data:e.emptyForm(),editBookId:null})},style:ke},o.a.createElement(te.a,{name:"plus square",color:"green"})," Add new genre");return o.a.createElement(oe.a,{duration:500},o.a.createElement(re.a,{trigger:t,open:this.state.modalOpen,onClose:function(){return e.setState({modalOpen:!1,data:e.emptyForm()})},closeIcon:!0},o.a.createElement(H.a,{icon:"file text outline",content:this.composeTitle()}),o.a.createElement(re.a.Content,null,o.a.createElement(ie.a,{id:"newgenre",onSubmit:this.handleSubmit},o.a.createElement(ie.a.Field,null,o.a.createElement(ce.a,{autoFocus:!0,type:"text",name:"text",placeholder:"Genre name",onChange:this.handleChange,value:this.state.data.text})),o.a.createElement(ie.a.Field,null,o.a.createElement(ce.a,{autoFocus:!0,type:"text",name:"value",placeholder:"Value",onChange:this.handleChange,value:this.state.data.value})))),o.a.createElement(re.a.Actions,null,o.a.createElement(ee.a,{form:"newgenre",type:"submit",color:"green"},o.a.createElement(te.a,{name:"save"})," Save"))))}}]),t}(a.Component);var je=Object(b.b)(function(e,t){return{genres:e.genres,data:t.data,editGenreId:t.editGenreId}},{createGenre:function(e){return function(t){return fetch("".concat(X.host,"/genres"),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(le).then(function(e){return t(de(e))})}},fetchGenresApi:pe,fetchGenreApi:function(e){return function(t){fetch("".concat(X.host,"/genres/").concat(e)).then(le).then(function(e){return t(ue(e))})}},updateGenre:function(e){return function(t){return fetch("".concat(X.host,"/genres/").concat(e.id),{method:"put",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(le).then(function(e){return t(de(e))})}}})(ye),Ce=["TEXT","VALUE","DATE"],Ie=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){n.props.fetchGenresApi()},n.handleDelete=function(e){n.props.deleteGenre(e).then(function(e){console.log("genre deleted!!",e),n.props.fetchGenresApi()})},n.state={},n.handleDelete=n.handleDelete.bind(Object(p.a)(Object(p.a)(n))),n.handleEdit=n.handleEdit.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleEdit",value:function(e){this.setState({editGenreId:e,genres:this.props.genres,modalOpen:!this.state.modalOpen})}},{key:"render",value:function(){var e=this;if(0===this.props.genres.length)return o.a.createElement(V.a,{active:!0,inline:"centered"});var t=this.props.genres,n=t?this.props.genres.findIndex(function(t){return t.id===e.state.editGenreId}):null;n&&this.props.genres[n];return o.a.createElement("div",null,o.a.createElement(je,{data:this.props.genres[n],editBookId:this.state.editGenreId,modalOpen:this.state.modalOpen}),o.a.createElement(ne,{thead:Ce,data:t,handleEdit:this.handleEdit,handleDelete:this.handleDelete}))}}]),t}(a.Component);var Se=Object(b.b)(function(e,t){return{genres:e.genres}},{fetchGenresApi:pe,deleteGenre:function(e){return function(t){return fetch("".concat(X.host,"/genres/").concat(e),{method:"delete",headers:{"Content-Type":"application/json"}}).then(le).then(function(n){return t(function(e){return{type:T,id:e}}(e))})}}})(Ie),Be=Object(E.createStore)(G,Object(g.composeWithDevTools)(Object(E.applyMiddleware)(O.a))),Te=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n.notify=n.notify.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"notify",value:function(e){console.log(e)}},{key:"render",value:function(){return o.a.createElement(b.a,{store:Be},o.a.createElement(h.a,null,o.a.createElement(m.a,null,o.a.createElement(U,null,o.a.createElement(f.a,{exact:!0,path:"/",component:x}),o.a.createElement(f.a,{exact:!0,path:"/library",component:ve}),o.a.createElement(f.a,{exact:!0,path:"/genres",component:Se})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[253,2,1]]]);
//# sourceMappingURL=main.7bc66dfc.chunk.js.map